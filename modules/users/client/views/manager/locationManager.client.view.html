<!--Left side location management-->
<!--Uses the LocationManager in locationManager.client.controller.js-->

<section class="content locationList">

  <div class="titlebar"><h1 class="md-display-2">Location Management</h1></div>

  <div class="pagecontent">
    <div ng-show="currentUserService.myPermissions.indexOf(1004) > -1 || authentication.user.roles.indexOf('admin') > -1">
      <select ng-model="locationsService.accountId" ng-change="locationsService.getLocations()">
        <option ng-repeat="account in accountsService.accounts" value="{{ account.accountId }}">{{ account.name }} - {{ account.address }}</option>
      </select>
    </div>

    <div layout="row" layout-align="space-between start">
      <div flex="40">
        <md-input-container class="md-block">
          <label>SEARCH</label>
          <input ng-model="search">
        </md-input-container>
      </div>
      <div>
        <md-button class="md-raised md-success invite" ui-sref="manager.locations.create">Create Location</md-button>
      </div>
    </div>

    <div layout="row" layout-align="space-between start">
      <div flex="40">

        <md-content layout="row" layout-align="space-between none">
          <md-list>
            <md-list-item style="min-width: 450px" class="md-3-line" ng-repeat="location in locationsService.locations  | filter: search">

              <div class="md-list-item-text">

                <h3>{{location.name}} </h3>
                <p>{{location.address}}</p>
                <p>{{ location.city }},{{ location.state }}</p>
              </div>

              <md-button class="md-secondary md-raised" ng-click="editLocation(location)">Edit</md-button>

              <md-divider ng-if="!$last"></md-divider>
            </md-list-item>
            <!--<md-divider></md-divider>-->


          </md-list>
        </md-content>
      </div>

      <div flex="50" class=" locationbox md-whiteframe-5dp" layout-padding layout-margin flex-offset="10" ui-view>
        <h3 class="md-headline" layout-align="center center">Select a location from the sidebar</h3></div>

    </div>
  </div>

</section>

