<!--Left side location management-->
<!--Uses the LocationManager in locationManager.client.controller.js-->

<section class="content locationList">

  <div class="titlebar"><h1 class="md-display-2">Location Management</h1></div>

  <div class="pagecontent location-manager">

    <div ng-show="currentUserService.myPermissions.indexOf(1004) > -1 || authentication.user.roles.indexOf('admin') > -1">
      <select ng-model="locationsService.accountId" ng-change="locationsService.getLocations()">
        <option ng-repeat="account in accountsService.accounts" value="{{ account.accountId }}">{{ account.name }} - {{ account.address }}</option>
      </select>
    </div>

    <div layout="row"  layout-align="space-around start" layout-padding layout-xs="column" layout-align-xs="start stretch">
      <div flex="45" flex-xs="100" flex-order-xs="2">
        <md-input-container class="md-block">
          <label>SEARCH</label>
          <input ng-model="search">
        </md-input-container>
      </div>
      <div flex="45" flex-xs="100" flex-order-xs="1">
        <md-button class="md-raised md-success create-btn" ui-sref="manager.locations.create">Create Location</md-button>
      </div>
    </div>

    <div layout="row"  layout-align="space-around start" layout-xs="column" layout-align-xs="start stretch" layout-padding>
      <div flex="45" flex-xs="100" flex-order-xs="2">

        <md-content>
          <md-list>
            <md-list-item class="md-3-line" ng-repeat="location in locationsService.locations  | filter: search">
              <div class="md-list-item-text">
                <h3>{{location.name}} </h3>
                <p>{{location.address}}</p>
                <p>{{ location.city }},{{ location.state }}</p>
              </div>
              <md-button class="md-secondary md-raised" ng-click="editLocation(location)">Edit</md-button>
              <md-divider ng-if="!$last"></md-divider>
            </md-list-item>
          </md-list>
        </md-content>
      </div>
      <div flex-xs="100" flex-order-xs="1" flex="45" class="edit-box md-whiteframe-5dp" ui-view>
        <h3 class="md-headline" layout-align="center center">Select a location from the list</h3>
      </div>

    </div>
  </div>

</section>

